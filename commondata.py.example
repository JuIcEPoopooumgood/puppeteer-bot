from os.path import exists
from discord import Embed, File, Interaction as _5, _6, _7
from discord.ext.commands import Context as _4
from typing import Optional, List, Union as _1, _2, _3


if exists("./.test_flag"):
    DiscordToken = "Unstable bot token"
else:
    DiscordToken = "Normal Bot Token"
owners = [1236667927944761396, 1018144363555069952, 1263441492882755635]
DiscordBot_name = "Puppeteer"
Imgur_ClientID = "f1d216554327a6d"
DiscordBot_description = """Heya, im puppeteer, a discord bot made by i_am_called_glitchy.
Originally just reverie's toy, this bot has been remade and coded to be useful for anyone to use, user or guild install :)"""
DiscordBot_subdescriptions = {
    "Engine": "Made with python 3.12.6 64-bit, pycord, irrvlo's API for some stuff, SherrifCarry's kirkajs (forked for python), lukeskywalk's api, and others...",
    "Legal Info": "This bot is not associated with kirka.io, irrvlo, or any other possibly implied party.\nThis bot has been made as a hobby project and all complaints should be directed to i_am_called_glitchy directly.\n-# dont bother with my email i dont check that.",
}
connectionString = "mongodb+srv://user:password@host"  # mongodb
glitchyKirkaBadges = [
    "https://i.imgur.com/JhMlisg.png",
    "https://i.imgur.com/PePV8tf.png",
    "https://i.imgur.com/hpqf68p.png",
    "https://i.imgur.com/QbyX7XV.png",
]
KirkaBadges = {
    "Reverie": "https://i.imgur.com/PePV8tf.png",
    "Glitchy": "https://i.imgur.com/JhMlisg.png",
    "ReverieLeader": "https://i.imgur.com/hpqf68p.png",
    "Pdev": "https://i.imgur.com/QbyX7XV.png",
    "poop": "https://cdn3.emoji.gg/emojis/9721-dnd-d20.png",
}
KirkaBackgrounds = {
    "Skynet": "https://i.imgur.com/NxItcCc.png",
    "Glitchedbg": "https://i.imgur.com/IZ2tC5C.jpeg",
    # "TTV": "https://i.imgur.com/MJ13qJi.png"
    "TTV": "https://cdn.discordapp.com/avatars/1169111190824308768/5019045e780fd069aa2f36bddd72847c.png?size=1024",
    "ttvbro": "https://cdn.discordapp.com/avatars/1258173648989327361/ec62376e6a0c061f2c4ca5ab07c805ca.png?size=1024",
    "Puppeteer": "https://cdn.discordapp.com/avatars/1293863138785103963/e4441ab3e0454e6eecae6b590d594131.png?size=1024",
}
UserAgent = ":) this is a bot btw"


class DebugException(BaseException):
    def __init__(self, message, *args, **kwargs):
        self.message = message
        super().__init__(*args, **kwargs)


class Response:
    def __init__(
        self,
        content: _1[str] = None,
        embeds: _1[List[_5]] = None,
        files: _1[List[_6]] = None,
        ephemeral: bool = False,
        meta: any = None,  # just in case
    ):
        self.content: _1[str] = content
        self.embeds: _2[_5] = embeds if embeds else []
        self.files: _2[_6] = files if files else []
        self.ephemeral: bool = ephemeral
        self.meta: any = None

    async def send(self, target: _4 | _5):
        if isinstance(target, _4):  # Prefix command context
            await target.send(
                content=self.content,
                embeds=self.embeds,
                files=self.files,
            )
        elif isinstance(target, _5):  # Slash command or button interaction
            if not target.response.is_done():
                await target.response.send_message(
                    content=self.content,
                    embeds=self.embeds,
                    files=self.files,
                    ephemeral=self.ephemeral,
                )
            else:
                await target.followup.send(
                    content=self.content,
                    embeds=self.embeds,
                    files=self.files,
                    ephemeral=self.ephemeral,
                )
        else:
            raise TypeError("Unsupported target type. Must be Context or Interaction.")


# :D Welcome to puppeteer's development team!
